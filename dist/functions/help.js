// Generated by CoffeeScript 2.5.1
//! ========================================
//! Help
var handler;

handler = function(msg, match, H) {
  var allHelpList, fn, i, len, ref, tokens;
  tokens = match.input.tokenize();
  if (/^(?:help|h)/i.test(tokens[0])) {
    ref = H.functions;
    for (i = 0, len = ref.length; i < len; i++) {
      fn = ref[i];
      if (fn.regex.test(tokens[1])) {
        return msg.channel.send(fn.help.long);
      }
    }
  }
  allHelpList = `Hereâ€™s a list of all my commands. Arguments in \`<angle brackets>\` are required, and those in \`[regular brackets]\` are optional.
For help for a specific command, use \`-h help <command>\`.
\`\`\`asciidoc
=== Commands ===
${((function() {
    var j, len1, ref1, results;
    ref1 = H.functions;
    results = [];
    for (j = 0, len1 = ref1.length; j < len1; j++) {
      fn = ref1[j];
      results.push(fn.help);
    }
    return results;
  })()).filter(function(x) {
    return !x.hidden;
  }).map(function(x) {
    return x.short;
  }).join('\n')}
\`\`\``;
  return msg.channel.send(allHelpList);
};

module.exports = {
  name: "Help",
  regex: /(?:^(?:help|h)(\s+|$))|(?:^\s*$)/i,
  handler: handler,
  help: {
    short: "-h help [...]  :: This list. What did you expect?",
    long: `\`\`\`asciidoc
=== Help for Help (so meta) ===
*Aliases*: help, h
-h help :: Returns a help menu listing all the commands.
-h help [command] :: Returns a help menu for that specific
                     command, much like this one.
\`\`\``
  }
};
