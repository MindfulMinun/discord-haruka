// Generated by CoffeeScript 2.3.1
//! ========================================
//! Special: Dad
var handler, imRegex;

imRegex = /^(?:i(?:['’]|(?:\s+a))?m)\s+/i;

handler = function(msg, Haruka) {
  var ref, reply;
  // Matches "im ", "i'm ", "i’m ", and "i am "
  // Case insensitive, whitespace required.

  // Break if regex doesn't match.
  if ((!imRegex.test(msg.content)) || msg.author.bot) {
    return false;
  }
  // If the person's fortunate enough to get a number higher than
  // 1 / 10, they’re spared.
  if ((1 / 10) <= Math.random()) {
    return false;
  }
  //! Likewise, if they're unlucky, send the reply.
  reply = msg.content.replace(imRegex, '');
  if ((ref = msg.channel) != null) {
    ref.send([`Hey ${reply}, I’m Haruka.`, `Hi ${reply}, I’m Haruka.`, `Hello ${reply}, I’m Haruka. Nice to meet you.`].choose(), {
      disableEveryone: true
    });
  }
  // Message doesn't call Haruka, exit prematurely
  return true;
};

module.exports = {
  name: "Dad",
  handler: handler
};
